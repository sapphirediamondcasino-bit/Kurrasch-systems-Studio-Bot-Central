<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KSS NEXUS | Kurrasch Systems Studios</title>
<link rel="icon" href="https://cdn.discordapp.com/attachments/1428592257581318255/1435726400219779232/KSS_N.png?ex=690d03e8&is=690bb268&hm=f5443a5f987567a0d2b447ca3f2479f13b746d4ed8b1169ae5ab0887075fe0bc&" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
  /* ===== Reset & Base ===== */
  :root{
    --bg-dark: #03030a;
    --panel-dark: rgba(8,6,20,0.6);
    --accent-a: #8e2de2;
    --accent-b: #4a00e0;
    --neon: #b38cff;
    --muted: #cfdaf0;
    --card-border: rgba(160,120,255,0.18);
    --glass: rgba(255,255,255,0.02);
    --discord-btn-bg: linear-gradient(90deg,#4a00e0,#8e2de2);
    --text: #eaf6ff;
    --soft: rgba(255,255,255,0.04);
  }
  [data-theme="light"]{
    --bg-dark: #f8f9fd;
    --panel-dark: rgba(255,255,255,0.85);
    --card-border: rgba(120,80,200,0.12);
    --neon: #5b3b9a;
    --text: #0b0f14;
    --soft: rgba(0,0,0,0.06);
    --discord-btn-bg: linear-gradient(90deg,#8e2de2,#4a00e0);
    --muted: #2a3a5a;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: var(--bg-dark);
    color: var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
    line-height:1.45;
  }

  /* Canvas background: sits behind everything */
  #matrix-canvas{
    position:fixed;
    inset:0;
    z-index:0;
    display:block;
    width:100%;
    height:100%;
    background: var(--bg-dark);
    pointer-events:none;
  }

  /* Top navigation */
  nav{
    position:fixed;
    z-index:50;
    left:0;right:0;top:18px;
    display:flex;
    justify-content:center;
    pointer-events:auto;
    padding:8px;
  }
  .nav-inner{
    width:100%;
    max-width:1200px;
    margin:0 16px;
    display:flex;
    align-items:center;
    gap:12px;
    background: linear-gradient(180deg, rgba(6,8,15,0.28), rgba(6,8,15,0.14));
    border-radius:14px;
    padding:10px 14px;
    box-shadow:0 8px 30px rgba(2,6,12,0.6);
    border: 1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
  }
  .brand{
    display:flex;align-items:center;gap:12px;
  }
  .brand img{width:56px;height:56px;object-fit:contain;border-radius:10px}
  .brand .title{font-family:'Orbitron',sans-serif;font-weight:700;color:var(--neon);font-size:16px;letter-spacing:0.6px}
  .nav-links{margin-left:12px;display:flex;gap:12px;align-items:center;flex:1}
  .nav-links a{
    color:var(--text);text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:600;font-size:13px;opacity:0.95;
  }
  .nav-links a:hover{background:var(--soft);transform:translateY(-2px)}
  .nav-actions{display:flex;gap:10px;align-items:center}

  /* theme toggle */
  .toggle{
    width:44px;height:34px;border-radius:999px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));
    display:inline-flex;align-items:center;padding:4px;cursor:pointer;border:1px solid rgba(255,255,255,0.04);
  }
  .toggle .knob{width:26px;height:26px;border-radius:999px;background:linear-gradient(180deg,#fff,#ddd);box-shadow:0 6px 18px rgba(0,0,0,0.25);transition:transform .22s cubic-bezier(.2,.9,.3,1)}
  [data-theme="dark"] .toggle{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18))}
  [data-theme="light"] .toggle{background:linear-gradient(180deg, rgba(0,0,0,0.04), rgba(255,255,255,0.9))}
  [data-theme="light"] .toggle .knob{transform:translateX(10px);}

  /* Hero */
  header.hero{
    min-height:78vh;
    padding:120px 20px 80px;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    z-index:10;position:relative;
    text-align:center;
  }
  .hero img{width:200px;height:auto;animation:float 4s ease-in-out infinite;filter:drop-shadow(0 20px 60px rgba(120,80,255,0.12))}
  @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
  .hero h1{font-family:'Orbitron',sans-serif;font-size:2.6rem;margin-top:18px;color:var(--neon);text-shadow:0 10px 40px rgba(120,80,255,0.06)}
  .hero p{max-width:880px;margin-top:18px;color:var(--muted);font-size:1.05rem}

  .discord-cta{
    margin-top:28px;display:inline-block;padding:12px 20px;border-radius:999px;background:var(--discord-btn-bg);color:#fff;font-weight:800;text-decoration:none;box-shadow:0 12px 40px rgba(78,28,160,0.12);
  }
  .discord-cta:hover{transform:translateY(-3px)}

  /* Main content container */
  .site{
    position:relative;
    z-index:10;
    max-width:1200px;
    margin:0 auto;
    padding:40px 20px 120px;
  }

  /* Sections */
  section{margin-top:40px;padding:12px 0}
  .card{
    background:var(--panel-dark);
    border-radius:14px;padding:22px;border:1px solid var(--card-border);
    box-shadow:0 20px 60px rgba(2,6,12,0.6);
    backdrop-filter: blur(10px);
  }

  /* About */
  #about .lead{font-size:1.05rem;color:var(--muted);max-width:900px;margin:18px auto;line-height:1.8}

  /* Bots gallery */
  .grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:28px;
    margin-top:18px;
  }
  @media (max-width:1100px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:700px){.grid{grid-template-columns:1fr}}
  .bot{
    padding:20px;border-radius:12px;background:linear-gradient(180deg, rgba(8,4,26,0.45), rgba(0,0,0,0.36));transition:transform .22s cubic-bezier(.2,.9,.3,1),box-shadow .22s;
    display:flex;flex-direction:column;align-items:center;text-align:center;
    min-height:320px;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.02);
    backdrop-filter: blur(8px);
  }
  .bot:hover{transform:translateY(-8px);box-shadow:0 30px 80px rgba(80,40,160,0.14)}
  .bot .img{width:120px;height:120px;border-radius:50%;overflow:hidden;border:1px solid rgba(255,255,255,0.03);margin-bottom:14px}
  .bot .img img{width:100%;height:100%;object-fit:cover}
  .bot h3{font-family:'Orbitron',sans-serif;margin-bottom:8px;color:var(--neon)}
  .bot p{color:var(--muted);font-size:0.98rem;padding:0 4px;line-height:1.6}
  .bot .meta{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
  .pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-weight:700;font-size:13px;color:var(--text);border:1px solid rgba(255,255,255,0.03)}

  /* Footer */
  footer{
    margin-top:48px;padding:36px 20px;text-align:center;color:var(--muted);font-size:14px;
    z-index:10;position:relative;
  }

  /* small screens adjustments */
  @media (max-width:520px){
    .brand img{width:44px;height:44px}
    .hero img{width:150px}
    .hero h1{font-size:1.85rem}
    .nav-links a{display:none}
  }

  /* Accessibility focus */
  a:focus, button:focus{outline:2px dashed rgba(180,120,255,0.6);outline-offset:4px}
</style>
</head>
<body data-theme="dark">

<!-- Matrix canvas behind all content -->
<canvas id="matrix-canvas" aria-hidden="true"></canvas>

<!-- Top navigation -->
<nav>
  <div class="nav-inner">
    <div class="brand" role="banner">
      <img src="https://cdn.discordapp.com/attachments/1428592257581318255/1435726400219779232/KSS_N.png?ex=690d03e8&is=690bb268&hm=f5443a5f987567a0d2b447ca3f2479f13b746d4ed8b1169ae5ab0887075fe0bc&" alt="KSS logo">
      <div class="title">KSS NEXUS</div>
    </div>

    <div class="nav-links" role="navigation" aria-label="Main">
      <a href="#home">Home</a>
      <a href="#about">About</a>
      <a href="#bots">Bots</a>
      <a href="#join">Join</a>
    </div>

    <div class="nav-actions">
      <a class="discord-cta" href="https://discord.gg/Aue9kV7uzw" id="join" target="_blank" rel="noopener noreferrer">Join Discord</a>

      <!-- theme toggle -->
      <button class="toggle" id="theme-toggle" aria-label="Toggle light dark theme" title="Toggle theme">
        <span class="knob" aria-hidden="true"></span>
      </button>
    </div>
  </div>
</nav>

<!-- Hero -->
<header class="hero" id="home">
  <img src="https://cdn.discordapp.com/attachments/1428592257581318255/1435726400219779232/KSS_N.png?ex=690d03e8&is=690bb268&hm=f5443a5f987567a0d2b447ca3f2479f13b746d4ed8b1169ae5ab0887075fe0bc&" alt="KSS logo">
  <h1>Kurrasch Systems Studios</h1>
  <p>We build dreams ‚Äî cinematic personalities and utility bots crafted with care. Browse our showcased creations below; each bot carries its own story and spirit.</p>
  <a class="discord-cta" href="https://discord.gg/Aue9kV7uzw" target="_blank" rel="noopener noreferrer">Join Our Discord</a>
</header>

<!-- Main site -->
<main class="site" role="main" aria-live="polite">

  <section id="about" aria-labelledby="about-h">
    <div class="card">
      <h2 id="about-h" style="font-family:Orbitron, sans-serif;font-size:1.35rem;color:var(--neon)">About Kurrasch Systems</h2>
      <p class="lead">Kurrasch Systems Studios is the engineering soul of imagination ‚Äî blending creative direction and technical precision to produce bots that behave like characters, collaborators, and tools. We build for music, events, moderation, and community; we build for heart.<br><br>
      Most of our offerings have optional subscription tiers for advanced features. Diane Keaton's bot is the single exception ‚Äî it is completely and forever free. The Systems team powers many bots while partnering studios, such as Game Killer Studio, retain administrative control where appropriate.</p>
    </div>
  </section>

  <section id="bots" aria-labelledby="bots-h">
    <h2 id="bots-h" style="font-family:Orbitron, sans-serif;font-size:1.5rem;text-align:center;color:var(--neon);margin-bottom:18px">Featured Bots</h2>

    <div class="grid" role="list">
      <!-- Diane -->
      <article class="bot" role="listitem" aria-labelledby="diane-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1432304819158126734/Diane_Keaton_2012-1_cropped_cropped.jpg?ex=6900914f&is=68ff3fcf&hm=457a9151c29044b2bfacd0f2b014833f795e47c480811766fedf652c53d62694&" alt="Diane Keaton bot image"></div>
        <h3 id="diane-title">Diane Keaton‚Ñ¢</h3>
        <p>Diane Keaton is our founding character bot ‚Äî an AI learning assistant and memorial tribute centered around an arcade experience. She's designed to be warm, nostalgic, and always free. Powered by Melaine (one of three AI assistants created by Kurrasch Systems), Diane welcomes players and guides them through the memorial arcade experience. Rights are shared between Kurrasch Systems and Game Killer Studio.</p>
        <div class="meta">
          <span class="pill">Completely free</span>
          <span class="pill">Arcade-first</span>
          <a href="https://dianesmemorialarcade.online" target="_blank" rel="noopener noreferrer" style="padding:6px 12px;border-radius:999px;background:rgba(138,43,226,0.15);font-weight:700;font-size:13px;color:var(--neon);border:1px solid rgba(138,43,226,0.3);text-decoration:none;">Visit Site</a>
        </div>
      </article>

      <!-- Betty -->
      <article class="bot" role="listitem" aria-labelledby="betty-title">
        <div class="img"><img src="https://static.wixstatic.com/media/b9bfc7_303b6fe981b44d438bdf419e7f0c7dd0~mv2.webp" alt="Betty White bot image"></div>
        <h3 id="betty-title">Betty White‚Ñ¢</h3>
        <p>Betty White is a powerful administrative bot with a community-first approach. She features our innovative Biden Violation system ‚Äî a 3-strike progressive discipline system that balances firm moderation with grace. Betty handles welcome flows, event coordination, moderation checks, reaction-based games, and comprehensive utility features to keep communities running smoothly.</p>
        <div class="meta"><span class="pill">Admin & moderation</span><span class="pill">Biden system</span></div>
      </article>

      <!-- Robin -->
      <article class="bot" role="listitem" aria-labelledby="robin-title">
        <div class="img"><img src="https://static.wixstatic.com/media/b9bfc7_dbf16b4f1dd949f0a60a0c3638e30794~mv2.webp" alt="Robin Williams bot image"></div>
        <h3 id="robin-title">Robin Williams</h3>
        <p>Robin Williams is our entertainment engine and repair bot ‚Äî "O Captain! My Captain!" A fast-thinking persona built for improv, friendly micro-theatre, and interactive prompts. Tunable by server owners, Robin runs quick improv games, delivers uplifting monologues, and helps host live community events while maintaining server health.</p>
        <div class="meta">
          <span class="pill">Improv & entertainment</span>
          <a href="https://sapphirediamondcasino-bit.github.io/Robin-Williams-Repair-Bot/" target="_blank" rel="noopener noreferrer" style="padding:6px 12px;border-radius:999px;background:rgba(138,43,226,0.15);font-weight:700;font-size:13px;color:var(--neon);border:1px solid rgba(138,43,226,0.3);text-decoration:none;">Visit Site</a>
        </div>
      </article>

      <!-- Stan's Beat -->
      <article class="bot" role="listitem" aria-labelledby="stan-title">
        <div class="img"><img src="https://static.wixstatic.com/media/b9bfc7_805cceba65204a8c9bf1e106e3f67f3d~mv2.png" alt="Stan's Beat bot image"></div>
        <h3 id="stan-title">Stan's Beat Bot‚Ñ¢</h3>
        <p>Stan's Beat Bot is made for music creators ‚Äî a comprehensive beat-hosting and preview system with community feedback channels, collaborative sessions, and demo drops. Built by music people for music people, Stan simplifies sharing, critique, and collaboration in producer communities.</p>
        <div class="meta">
          <span class="pill">Music & collaboration</span>
          <a href="https://sapphirediamondcasino-bit.github.io/Stan-s-Beat-Bot/" target="_blank" rel="noopener noreferrer" style="padding:6px 12px;border-radius:999px;background:rgba(138,43,226,0.15);font-weight:700;font-size:13px;color:var(--neon);border:1px solid rgba(138,43,226,0.3);text-decoration:none;">Visit Site</a>
        </div>
      </article>

      <!-- NHI Conference -->
      <article class="bot" role="listitem" aria-labelledby="nhiconf-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1428592527132463156/NHI_1.png?ex=69003ef8&is=68feed78&hm=511076ef0e893859b3e70da09fe78e656f7bc69a283e7c147f03e0e31d1a1e16&" alt="NHI Conference bot image"></div>
        <h3 id="nhiconf-title">NHI Conference‚Ñ¢</h3>
        <p>NHI Conference coordinates large-scale events with precision ‚Äî speaker queues, session rooms, reminders, and agenda management. This is one of five specialized NHI bots, combining the functionality of Welcomer, MEE6, UnbelievaBoat, Dyno, and ProBot into one powerful conference management system. Designed to replicate professional conference flows inside Discord.</p>
        <div class="meta"><span class="pill">Events & scheduling</span><span class="pill">5-in-1 system</span></div>
      </article>

      <!-- NHI -->
      <article class="bot" role="listitem" aria-labelledby="nhi-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1428592527409418331/NHI_3.png?ex=69003ef8&is=68feed78&hm=ce70d86718e49d8c6504060b20f46a186d1a1ad117d62ba7001f37ff7d7d0703&" alt="NHI bot image"></div>
        <h3 id="nhi-title">NHI‚Ñ¢</h3>
        <p>NHI is the Systems toolkit for integrations and automation ‚Äî webhooks, external data syncs, role-syncs, server statistics, and routine automations that keep busy servers running without manual work. A comprehensive solution for server infrastructure and data management.</p>
        <div class="meta">
          <span class="pill">Integrations</span>
          <a href="https://sapphirediamondcasino-bit.github.io/NHI-Bot/" target="_blank" rel="noopener noreferrer" style="padding:6px 12px;border-radius:999px;background:rgba(138,43,226,0.15);font-weight:700;font-size:13px;color:var(--neon);border:1px solid rgba(138,43,226,0.3);text-decoration:none;">Visit Site</a>
        </div>
      </article>

      <!-- KS Application -->
      <article class="bot" role="listitem" aria-labelledby="ks-title">
        <div class="img"><img src="https://static.wixstatic.com/media/b9bfc7_771c19265cf24a8d94dca9374e6c9adc~mv2.webp" alt="KS Application bot image"></div>
        <h3 id="ks-title">KS Application Bot‚Ñ¢</h3>
        <p>KS Application Bot runs comprehensive multi-step application forms and ticket systems. Features 5 default application templates for different platforms including Roblox, FiveM, and more. Includes applicant tracking, staff review workflows, timestamped decisions, and organized record exports to streamline onboarding for studios and volunteer teams.</p>
        <div class="meta"><span class="pill">Applications</span><span class="pill">Ticket system</span></div>
      </article>

      <!-- Midwest Weather -->
      <article class="bot" role="listitem" aria-labelledby="midwest-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1432308032179540058/Midwest_Weather_Bot_2.webp?ex=6900944d&is=68ff42cd&hm=c27203aa7e229375cab7fbb529f382596d3d6d542908068d5c68ce3b23d09825&" alt="Midwest Weather bot image"></div>
        <h3 id="midwest-title">Midwest Weather‚Ñ¢</h3>
        <p>Built for regional clarity ‚Äî choose West/Mid/East, then state then town to get focused local forecasts. Fast, conversational, and customizable.</p>
        <div class="meta"><span class="pill">Regional forecasts</span></div>
      </article>

      <!-- Roblox Society -->
      <article class="bot" role="listitem" aria-labelledby="rbx-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1435972278461661357/Roblox_Society_2.0.png?ex=690de8e6&is=690c9766&hm=e535dbf328ca8b87b6af9c731e655d236a0896e4221cbd25684e10e92a7e2a33&" alt="RBX bot image"></div>
        <h3 id="rbx-title">Roblox Society‚Ñ¢</h3>
        <p>Roblox Society is a full-featured toolkit designed for Roblox communities ‚Äî combining powerful utilities, player tools, and moderation systems into one seamless platform. With features like user and group lookups, avatar and outfit renders, marketplace and limited-item data, and advanced role systems, Roblox Society makes community management faster, cleaner, and more intuitive. Built with a focus on clarity and speed, it helps players and moderators access everything they need.</p>
        <div class="meta"><span class="pill">Docs & guidance</span><span class="pill">Reference hub</span></div>
      </article>

      <!-- Portal-X -->
      <article class="bot" role="listitem" aria-labelledby="rbx-title">
        <div class="img"><img src="https://cdn.discordapp.com/attachments/1428592257581318255/1436100607030202449/Portal-X2.0.png?ex=690e606a&is=690d0eea&hm=b05c6611a80343bec63523ecfbcdff02c3c5fae9176ad10713771f45b84079c6&" alt="RBX bot image"></div>
        <h3 id="rbx-title">Portal-X‚Ñ¢</h3>
        <p>Coming Portal-X is an advanced next-generation Discord bot built to push the limits of what‚Äôs possible in-server. It isn‚Äôt just another game bot ‚Äî it‚Äôs a complete gaming ecosystem that creates, hosts, and runs real-time playable games directly inside Discord through interactive embeds and dynamic visuals.

Powered by adaptive scripting and AI-driven logic, Portal-X can generate and manage five fully interactive game sectors, each featuring unique multiplayer experiences ‚Äî from Roblox-style RPGs and tower defenses to fast-paced FPS simulations and classic Flash-revived titles.

Every game is native to its home server, with permissions tightly controlled: only staff, admins, and the owner have management access, while players enjoy seamless, controlled gameplay sessions that evolve as the bot updates its environments in real time.

Portal-X isn‚Äôt just made to play games ‚Äî it‚Äôs built to redefine them.üåê The Future of Portal-X

A full Portal-X web platform is currently in development.
The site will serve as the command hub and community hub for:

Managing server game worlds

Uploading and sharing custom game scripts

Launching cross-server events

Accessing game stats, leaderboards, and development logs

Testing experimental game builds and tools before Discord deployment

The website will reflect the same gaming-edge design as the bot ‚Äî sleek, dark, futuristic, and built for creators and players alike.</p>
        <div class="meta"><span class="pill">Docs & guidance</span><span class="pill">Reference hub</span></div>
      </article>

    </div>
  </section>

  <section aria-labelledby="closing">
    <div class="card" style="margin-top:28px">
      <h3 id="closing" style="font-family:Orbitron, sans-serif;color:var(--neon)">Want a custom bot?</h3>
      <p style="color:var(--muted)">We build custom bots for channels, studios, and artists. If you want a unique personality, a studio integration, or a production-ready system ‚Äî join our Discord and our team will walk you through options and pricing.</p>
    </div>
  </section>

  <footer>
    <div>¬© <span id="year"></span> Kurrasch Systems Studios ‚Äî Dreams Engineered. <a href="https://discord.gg/Aue9kV7uzw" target="_blank" rel="noopener noreferrer">Join our Discord</a></div>
    <div style="margin-top:8px;color:var(--muted)">Game Killer Studio manages administrative ownership for some bots (e.g. Diane Keaton). Systems provides the engineering power.</div>
  </footer>
</main>

<script>
/* ===========================
   Matrix Canvas - Binary Rain (0s red, 1s baby blue)
   =========================== */
(function(){
  const canvas = document.getElementById('matrix-canvas');
  const ctx = canvas.getContext('2d', { alpha: false });

  let W = 0, H = 0;
  let cols = [];
  let font = 18;
  let colsCount = 0;
  let raf = null;

  // Theme-aware colors
  function getColors() {
    const isDark = document.body.getAttribute('data-theme') === 'dark';
    return {
      bg: isDark ? '#03030a' : '#f8f9fd',
      fadeAlpha: isDark ? 0.08 : 0.12,
      '0': '#ff3333',
      '1': '#66ccff',
      'A': '#ff3333',
      'B': '#66ccff',
      'C': '#ff3333',
      'D': '#66ccff',
      'E': '#ff3333',
      'F': '#66ccff',
      'G': '#ff3333',
      'H': '#66ccff',
      'I': '#ff3333',
      'J': '#66ccff',
      'K': '#ff3333'
    };
  }

  function init(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;

    font = Math.max(14, Math.min(24, Math.floor(W / 70)));
    colsCount = Math.floor(W / (font * 0.6));
    if (W < 420) colsCount = Math.floor(W / (font * 1.1));

    cols = new Array(colsCount).fill(0).map((_, i) => {
      return {
        x: Math.floor(i * (W / colsCount)),
        y: Math.random() * -H,
        speed: (Math.random() * 1.2 + 0.8) * (font / 16),
        chars: []
      };
    });

    ctx.font = `${font}px "Courier New", monospace`;
    ctx.textBaseline = 'top';
  }

  function fadeBackground(){
    const colors = getColors();
    ctx.fillStyle = colors.bg;
    ctx.globalAlpha = colors.fadeAlpha;
    ctx.fillRect(0, 0, W, H);
    ctx.globalAlpha = 1;
  }

  function drawChar(ch, x, y, color, alpha){
    ctx.save();
    ctx.shadowColor = color;
    ctx.shadowBlur = font * 0.8;
    ctx.globalAlpha = alpha;
    ctx.fillStyle = color;
    ctx.fillText(ch, x, y);
    ctx.restore();
  }

  function step(){
    const colors = getColors();
    
    fadeBackground();

    for (let i = 0; i < colsCount; i++){
      const c = cols[i];
      
      const trailLen = Math.floor(Math.random() * 15 + 10);
      for (let s = 0; s < trailLen; s++){
        const posY = c.y - (s * font);
        if (posY > -font && posY < H + font){
          const char = Math.random() > 0.5 ? '1' : '0' : 'A' :'B' : 'C' :'D' : 'E' : 'F' : 'G' : 'H' : 'I' 'J' : 'K';
          const color = colors[char];
          const alpha = Math.max(0.15, 1 - (s / trailLen));
          drawChar(char, c.x, posY, color, alpha);
        }
      }

      c.y += c.speed;

      if (c.y > H + Math.random() * 400) {
        c.y = -Math.random() * 300;
        c.speed = (Math.random() * 1.2 + 0.8) * (font / 16);
      }
    }

    raf = requestAnimationFrame(step);
  }

  function start(){
    cancelAnimationFrame(raf);
    init();
    const colors = getColors();
    ctx.fillStyle = colors.bg;
    ctx.fillRect(0, 0, W, H);
    step();
  }

  let rt;
  window.addEventListener('resize', ()=> {
    clearTimeout(rt);
    rt = setTimeout(()=> start(), 150);
  });

  document.addEventListener('visibilitychange', ()=>{
    if (document.hidden) cancelAnimationFrame(raf);
    else start();
  });

  // Listen for theme changes
  const observer = new MutationObserver(() => start());
  observer.observe(document.body, { attributes: true, attributeFilter: ['data-theme'] });

  start();
})();

/* ===========================
   Theme toggle & instant-anchor nav (no smooth scroll)
   =========================== */

// set current year
document.getElementById('year').textContent = new Date().getFullYear();

// retain theme preference
const body = document.body;
const toggle = document.getElementById('theme-toggle');

function setTheme(theme){
  body.setAttribute('data-theme', theme);
  if (theme === 'light') toggle.querySelector('.knob').style.transform = 'translateX(10px)';
  else toggle.querySelector('.knob').style.transform = 'translateX(0)';
}

toggle.addEventListener('click', ()=> {
  const current = body.getAttribute('data-theme') || 'dark';
  const next = current === 'dark' ? 'light' : 'dark';
  setTheme(next);
});

(function initTheme(){
  setTheme('dark');
})();

/* Accessibility: allow toggle via keyboard (space/enter) */
toggle.addEventListener('keydown', (e) => {
  if (e.key === ' ' || e.key === 'Enter') {
    e.preventDefault();
    toggle.click();
  }
});
</script>
</body>
</html>

